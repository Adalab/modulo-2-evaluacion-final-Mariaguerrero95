const u=document.querySelector(".js-input"),y=document.querySelector(".js-search"),S=document.querySelector(".js-container"),a=document.querySelector(".js-favorites");let m=[],t=[];const g=localStorage.getItem("favorites");g!==null&&(t=JSON.parse(g));function f(e,n){var c,l;n.innerHTML="";for(const o of e){const i=document.createElement("div");i.classList.add("serie"),i.id=o.mal_id,t.some(r=>r&&r.mal_id===o.mal_id)&&(i.style.backgroundColor="#f3fbe1",i.style.color="rgb(66, 236, 227)");const p=document.createElement("h2"),L=document.createTextNode(o.title);p.appendChild(L);const s=document.createElement("img"),d=(l=(c=o.images)==null?void 0:c.jpg)==null?void 0:l.image_url;if(!d||d==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?s.setAttribute("src","https://via.placeholder.com/210x295/ffcc00/666666/?text=Anime"):(s.setAttribute("src",d),s.onerror=function(){s.setAttribute("src","https://via.placeholder.com/210x295/ffcc00/666666/?text=Anime")}),i.appendChild(p),i.appendChild(s),n===a){const r=document.createElement("button");r.classList.add("delete-X-button");const v=document.createElement("span");v.textContent="X",r.appendChild(v),r.classList.add("delete-icon"),r.addEventListener("click",x=>{x.stopPropagation(),E(o.mal_id)}),i.prepend(r)}else i.addEventListener("click",h);n.appendChild(i),i.addEventListener("click",h)}}function h(e){const n=e.currentTarget.id,c=m.find(o=>n==o.mal_id);if(!c){console.error("Serie no encontrada en resultsList con el id:",n);return}t.findIndex(o=>n==o.mal_id)===-1&&(t.push(c),localStorage.setItem("favorites",JSON.stringify(t)),f(t,a))}function E(e){const n=t.findIndex(c=>c.mal_id===e);n!==-1?(t.splice(n,1),localStorage.setItem("favorites",JSON.stringify(t)),f(t,a)):console.log("Serie no encontrada para eliminar")}const k=()=>{u.value,fetch(`https://api.jikan.moe/v4/anime?q=${u.value}`).then(e=>e.json()).then(e=>{console.log(e),m=e.data,f(m,S)})};function C(e){e.preventDefault(),k()}y.addEventListener("click",C);const b=document.querySelector(".js-reset");function j(){t=[],localStorage.removeItem("favorites"),S.innerHTML="",a.innerHTML="",u.value=""}b.addEventListener("click",j);
//# sourceMappingURL=main.js.map
