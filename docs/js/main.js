const m=document.querySelector(".js-input"),y=document.querySelector(".js-search"),h=document.querySelector(".js-container"),a=document.querySelector(".js-favorites");let f=[],t=[];const g=localStorage.getItem("favorites");g!==null&&(t=JSON.parse(g));function l(e,n){var s,d;n.innerHTML="";for(const o of e){const i=document.createElement("div");i.classList.add("serie"),i.id=o.mal_id,t.some(r=>r&&r.mal_id===o.mal_id)&&(i.style.backgroundColor="#f3fbe1",i.style.color="rgb(66, 236, 227)");const p=document.createElement("h2"),L=document.createTextNode(o.title);p.appendChild(L);const c=document.createElement("img"),u=(d=(s=o.images)==null?void 0:s.jpg)==null?void 0:d.image_url;if(!u||u==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?c.setAttribute("src","https://via.placeholder.com/210x295/ffcc00/666666/?text=Anime"):(c.setAttribute("src",u),c.onerror=function(){c.setAttribute("src","https://via.placeholder.com/210x295/ffcc00/666666/?text=Anime")}),i.appendChild(p),i.appendChild(c),n===a){const r=document.createElement("button");r.classList.add("delete-X-button");const v=document.createElement("span");v.textContent="X",r.appendChild(v),r.classList.add("delete-icon"),r.addEventListener("click",x=>{x.stopPropagation(),E(o.mal_id)}),i.prepend(r)}else i.addEventListener("click",S);n.appendChild(i),i.addEventListener("click",S)}}function S(e){const n=e.currentTarget.id,s=f.find(o=>n==o.mal_id);if(!s){console.error("Serie no encontrada en resultsList con el id:",n);return}t.findIndex(o=>n==o.mal_id)===-1&&(t.push(s),localStorage.setItem("favorites",JSON.stringify(t)),l(t,a))}function E(e){const n=t.findIndex(s=>s.mal_id===e);n!==-1?(t.splice(n,1),localStorage.setItem("favorites",JSON.stringify(t)),l(t,a)):console.log("Serie no encontrada para eliminar")}function F(){const e=localStorage.getItem("favorites");e!==null&&(t=JSON.parse(e),l(t,a))}F();const k=()=>{m.value,fetch(`https://api.jikan.moe/v4/anime?q=${m.value}`).then(e=>e.json()).then(e=>{console.log(e),f=e.data,l(f,h)})};function C(e){e.preventDefault(),k()}y.addEventListener("click",C);const I=document.querySelector(".js-reset");function T(){t=[],localStorage.removeItem("favorites"),h.innerHTML="",a.innerHTML="",m.value=""}I.addEventListener("click",T);
//# sourceMappingURL=main.js.map
